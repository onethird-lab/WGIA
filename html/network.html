<html>

<head>
    <title>Tutorial 1: Getting Started</title>
	<link rel="stylesheet" href="__PUBLIC__/bootstrap-5.0.2-dist/css/bootstrap.min.css">
    <link href="__PUBLIC__/css/cytoscape.js-panzoom.css" rel="stylesheet" type="text/css" />
	<link href="__PUBLIC__/fonts/font-awesome-4.0.3/css/font-awesome.css" rel="stylesheet" type="text/css" />
	
	<script src="__PUBLIC__/js/jquery.min.js"></script>
	<script src='__PUBLIC__/js/cytoscape.min.js'></script>
	
	<script src="__PUBLIC__/js/cytoscape-panzoom.js"></script>
	<script src="__PUBLIC__/js/cytoscape-cola.js"></script>
</head>

<style>
#cy {
  border: solid;
  border-width: 1;
  height: 100%;
}

h1 {
  opacity: 0.5;
  font-size: 1em;
}
</style>

<body>
    <h1>cytoscape-cola demo</h1>

<!-- container-fluid : start -->
<div class="container-fluid">
  <div class="row">
    <div class="col-sm-6">
<form>
  <div class="form-group">
    <label for="exampleInputEmail1">Email address</label>
    <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter email">
    <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
  </div>
  <div class="form-group">
    <label for="exampleInputPassword1">Password</label>
    <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
  </div>
  <div class="form-group">
    <label for="exampleSelect1">Example select</label>
    <select class="form-control" id="exampleSelect1">
      <option>1</option>
      <option>2</option>
      <option>3</option>
      <option>4</option>
      <option>5</option>
    </select>
  </div>
  <div class="form-group">
    <label for="exampleSelect2">Example multiple select</label>
    <select multiple class="form-control" id="exampleSelect2">
      <option>1</option>
      <option>2</option>
      <option>3</option>
      <option>4</option>
      <option>5</option>
    </select>
  </div>
  <div class="form-group">
    <label for="exampleTextarea">Example textarea</label>
    <textarea class="form-control" id="exampleTextarea" rows="3"></textarea>
  </div>
  <div class="form-group">
    <label for="exampleInputFile">File input</label>
    <input type="file" class="form-control-file" id="exampleInputFile" aria-describedby="fileHelp">
    <small id="fileHelp" class="form-text text-muted">This is some placeholder block-level help text for the above input. It's a bit lighter and easily wraps to a new line.</small>
  </div>
  <fieldset class="form-group">
    <legend>Radio buttons</legend>
    <div class="form-check">
      <label class="form-check-label">
        <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios1" value="option1" checked>
        Option one is this and that&mdash;be sure to include why it's great
      </label>
    </div>
    <div class="form-check">
    <label class="form-check-label">
        <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios2" value="option2">
        Option two can be something else and selecting it will deselect option one
      </label>
    </div>
    <div class="form-check disabled">
    <label class="form-check-label">
        <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios3" value="option3" disabled>
        Option three is disabled
      </label>
    </div>
  </fieldset>
  <div class="form-check">
    <label class="form-check-label">
      <input type="checkbox" class="form-check-input">
      Check me out
    </label>
  </div>
  <button type="submit" class="btn btn-primary">Submit</button>
</form>

    </div>
    <div class="col-sm-6">

      <!-- graph : start -->
      <h5>Graph</h5>
          <div id="cy-container">
            <div id="cy"></div>
          </div>

      <!-- graph : end -->

    </div>


  </div>
</div>
<!-- container-fluid : end -->
<script src="__PUBLIC__/js/jquery.min.js"></script>
	
		<script src="__PUBLIC__/bootstrap-5.0.2-dist/js/bootstrap.bundle.min.js"></script>
    <script>
    /* cytoscape js selector demo
moved to https://codepen.io/yeoupooh/pen/BjWvRa
 */
$(function() {

  var win = $(window);

  win.resize(function() {
    resize();
  });

  function resize() {
    console.log(win.height(), win.innerHeight());
    $("#cy-container").height(win.innerHeight() - 130);
    cy.resize();
  }

  setTimeout(resize, 0);

  var nodeOptions = {
    normal: {
      bgColor: 'grey'
    },
    selected: {
      bgColor: 'yellow'
    }
  };

  var edgeOptions = {
    selected: {
      lineColor: 'yellow'
    }
  };

  var cy = window.cy = cytoscape({
    container: document.getElementById('cy'),

    minZoom: 0.1,
    maxZoom: 100,
    wheelSensitivity: 0.1,

    // panningEnabled: false,
    //boxSelectionEnabled: true,
    //autounselectify: false,
    //selectionType: 'additive',
    //autoungrabify: true,

    layout: {
      name: 'cola'
    },

    style: [{
        selector: 'node',
        style: {
          'width': 200,
          'height': 200,
          'content': 'data(text)',
          //          'text-opacity': 0.5,
          'text-valign': 'center',
          'color': 'white',
          'background-color': nodeOptions.normal.bgColor,
          'text-outline-width': 2,
          'text-outline-color': '#222'
        }
      },

      {
        selector: 'edge',
        style: {
          'width': 10,
          'target-arrow-shape': 'triangle',
          'line-color': 'data(color)',
          'target-arrow-color': '#9dbaea'
        }
      },

      {
        selector: ':selected',
        style: {
          'background-color': 'yellow',
          'line-color': 'yellow',
          'target-arrow-color': 'black',
          'source-arrow-color': 'black',
        }
      },

      {
        selector: 'edge:selected',
        style: {
          'width': 20
        }
      }
    ],

    elements: {
      //selectable: false, 
      grabbable: false,
      nodes: [{
        data: {
          id: '0',
          text: 'abc'
        }
      }, {
        data: {
          id: '1',
          text: 'def'
        }
      }, {
        data: {
          id: '2',
          text: 'ghi'
        }
      }, {
        data: {
          id: '3',
          text: 'jkl'
        }
      }], // nodes
      edges: [{
          data: {
            color: '#f00',
            source: '0',
            target: '1'
          }
        }, {
          data: {
            color: '#f00',
            source: '1',
            target: '2'
          }
        }, {
          data: {
            color: '#f00',
            source: '2',
            target: '3'
          }
        }, {
          data: {
            color: '#f00',
            source: '0',
            target: '2'
          }
        }, {
          data: {
            color: '#000',
            source: '0',
            target: '3'
          }
        }, {
          data: {
            color: '#f00',
            source: '0',
            target: '3'
          }
        }] // edges
    } // elements
	
  }); // cytoscape
	
	cy.panzoom({
					// options here...
				});
				
  var selectedNodeHandler = function(evt) {
    //console.log(evt.data); // 'bar'

    $("#edge-operation").hide();
    $("#node-operation").show();

    var target = evt.cyTarget;
    console.log('select ' + target.id(), target);
    $("#selected").text("Selected:" + target.id());
  }

  var unselectedHandler = function(evt) {
    $("#edge-operation").hide();
    $("#node-operation").hide();
  }

  var selectedEdgeHandler = function(evt) {
    $("#edge-operation").show();
    $("#node-operation").hide();

    var target = evt.cyTarget;
    console.log('tapped ' + target.id(), target);
    $("#selected").text("Selected:" + target.id());
  }

  cy.on('select', 'node', selectedNodeHandler);
  cy.on('unselect', 'node', unselectedHandler);
  cy.on('select', 'edge', selectedEdgeHandler);
  cy.on('unselect', 'edge', unselectedHandler);

  // NOTE: Use selector(':selected') instead of event handler
  function addSelectHandler() {
    cy.on('select', 'node', function(evt) {
      console.log('select node:', evt.cyTarget);
      evt.cyTarget.animate({
        style: {
          'background-color': nodeOptions.selected.bgColor
        }
      }, {
        duration: 100
      });
    });
    cy.on('unselect', 'node', function(evt) {
      console.log('unselect node:', evt.cyTarget);
      evt.cyTarget.stop();
      evt.cyTarget.style({
        'background-color': nodeOptions.normal.bgColor
      });
    });
    cy.on('select', 'edge', function(evt) {
      console.log('select edge:', evt.cyTarget);
      evt.cyTarget.animate({
        style: {
          'line-color': edgeOptions.selected.lineColor
        }
      }, {
        duration: 100
      });
    });
    cy.on('unselect', 'edge', function(evt) {
      console.log('unselect edge:', evt.cyTarget);
      evt.cyTarget.stop();
      evt.cyTarget.style({
        'line-color': evt.cyTarget.data('color')
      });
    });
  }

  $("#fit").click(function() {
    console.log('cy=', cy);
    cy.fit();
  });

  $("#layout").click(function() {
    console.log('cy=', cy);
    cy.layout({
      name: 'cola'
    });
  });

}); // ready
    </script>
	
	
</body>
</html>